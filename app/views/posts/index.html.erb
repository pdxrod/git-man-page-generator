<style type="text/css">
.popup
{
        position:absolute;
        border:solid 1px black;
        background-color:white;
        padding:4px;
}
</style>

<script type="text/javascript">
function findPos(obj) {
        var curleft = curtop = 0;
        if (obj.offsetParent) {
                curleft = obj.offsetLeft
                curtop = obj.offsetTop
                while (obj = obj.offsetParent) {
                        curleft += obj.offsetLeft
                        curtop += obj.offsetTop
                }
        }
        return [curleft,curtop];
}

function display_menu(parent, named, pic, length)
{
        if( pic == '' ) { return; }
        pos = parseInt(length) + 10;
        var menu_element = document.getElementById(named);
        menu_element.style.display = "";
        menu_element.innerHTML = '<img src="/data/' + pic +
                  '" width="67" height="' + length + '" />';
        var placement = findPos(parent);
        menu_element.style.left = (67 + placement[0]) + "px";
        menu_element.style.top =  (placement[1] - pos) + "px";
}

function hide_menu(named)
{
        var menu_element = document.getElementById(named);
        menu_element.style.display = "none";
}
</script>


    <div class="popup" id="picpopup" style="display:none;">

    </div>

<div id="pdxspurs-list">

<table>
  <tr>
    <th>Thread</th>
    <th>Who</th>
    <th>When</th>
    <th>Title</th>
    <th>Message</th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
  </tr>
<tr>
  <td><hr /></td><td><hr /></td><td><hr /></td>
  <td><hr /></td><td><hr /></td>
  <td><hr /></td><td><hr /></td>
</tr>

<% for post in @posts %>
  <tr valign="top" class="<%= cycle('list-line-odd', 'list-line-even') %>">
    <td><%=h post.list.title_display %></td>
   
    <td><%=h post.user.name_display %></td>
    <td><%=h post.date_display %></td>
    
    <td>
      <a href="/<%= post.url_title %>" 
onmouseover="display_menu( this, 'picpopup', '<%= post.image %>', <%= post.length %> );" 
onmouseout="hide_menu( 'picpopup' );"><%=h post.title %></a>
    </td>
    <td><%=h post.message_display  %></td>
   
  <% if post.user_id == current_user.id %>
    <td><%= link_to 'edit', edit_post_path(post) %></td>
    <td> <% if can_delete?( post ) %>
          <%=
           button_to "delete", { :action => "destroy", :id => delete.id },
            :confirm => "Are you sure you want to delete this message?", :method => :delete
          %>
         <% end %>
    </td>    
  <% else %>
    <td><br /></td><td><br /></td>  
  <% end %>

  </tr>
<% end %>
</table>

</div>



